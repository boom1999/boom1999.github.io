<% if (theme.gitalk.enable && post.comments) { %>
<div class="gitalk" id="gitalk-container"></div>
<%- css('https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css') %>
<%- js('https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js') %>
<%- js('https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js') %>
<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '<%- theme.gitalk.clientID %>',
    clientSecret: '<%- theme.gitalk.clientSecret %>',
    repo: '<%- theme.gitalk.repo %>',
    owner: '<%- theme.gitalk.owner %>',
    admin: ['<%- theme.gitalk.admin %>'],
    // id: location.pathname,      // Ensure uniqueness and length less than 50
    id: md5(location.pathname),
    distractionFreeMode: true,  // Facebook-like distraction free mode
    pagerDirection: 'last',
    proxy: '<%- theme.gitalk.proxy %>'
  })

  gitalk.render('gitalk-container')
</script>
<% } %>
